<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ† ç°¡ç´„éŠæˆ²ä¸­å¿ƒï¼šåæ‡‰åŠ›æŒ‘æˆ°èˆ‡åœˆåœˆå‰å‰</title>
    <style>
        /* CSS æ¨£å¼ï¼šå…¨å±€è¨­ç½® */
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f0f4f8;
            color: #333;
            margin: 0;
            padding: 0;
            text-align: center;
        }
        header {
            background-color: #4a90e2;
            color: white;
            padding: 20px 0;
            margin-bottom: 30px;
        }
        .container {
            width: 90%;
            max-width: 900px;
            margin: 0 auto;
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            justify-content: center;
        }
        .game-card {
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
            padding: 20px;
            width: 100%;
            max-width: 400px; /* èª¿æ•´å¡ç‰‡æœ€å¤§å¯¬åº¦ */
            text-align: center;
        }
        h2 {
            color: #4a90e2;
            border-bottom: 2px solid #e0e0e0;
            padding-bottom: 10px;
            margin-top: 0;
        }
        button {
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            border: none;
            border-radius: 5px;
            margin-top: 10px;
            transition: background-color 0.3s;
        }

        /* ------------------------------------------- */
        /* âš¡ åæ‡‰åŠ›æŒ‘æˆ°ï¼šç¾åŒ–èˆ‡æ”¾å¤§ */
        /* ------------------------------------------- */
        #reaction-area {
            background-color: #f8d7da;
            padding: 50px 20px; /* å¢åŠ å…§é‚Šè· */
            border-radius: 10px;
            margin: 20px 0;
            min-height: 250px; /* æ”¾å¤§é«˜åº¦ */
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 28px; /* æ”¾å¤§å­—é«” */
            font-weight: bold;
            flex-direction: column;
            user-select: none; /* é˜²æ­¢é¸ä¸­æ–‡å­— */
            transition: background-color 0.1s ease-out;
        }
        #reaction-button {
            padding: 25px 50px; /* é€²ä¸€æ­¥åŠ å¤§æŒ‰éˆ• */
            font-size: 32px; /* æ”¾å¤§æŒ‰éˆ•å­—é«” */
            background-color: #6c757d;
            color: white;
            border-radius: 12px;
            width: 90%; 
            max-width: 350px;
            box-shadow: 0 4px 0 #5a6268; /* 3D ç«‹é«”æ„Ÿ */
        }
        #reaction-button:active {
            box-shadow: none;
            transform: translateY(4px);
        }
        /* ç‹€æ…‹é¡è‰² */
        .reaction-ready { 
            background-color: #ffc107; /* é»ƒè‰² */
            color: #333;
        }
        .reaction-go { 
            background-color: #ff4136 !important; /* é®®ç´…è‰² */
            color: white;
        }
        .reaction-success {
            background-color: #28a745; /* ç¶ è‰² */
            color: white;
        }
        .reaction-fail {
            background-color: #dc3545; /* èª¤é»ç´… */
            color: white;
        }
        /* çµæœæ–‡å­—æ¨£å¼ */
        #r-high-score-display {
            margin-top: 15px;
            font-size: 20px;
        }

        /* ------------------------------------------- */
        /* â­•ï¸âŒ åœˆåœˆå‰å‰ */
        /* ------------------------------------------- */
        #tictactoe-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            width: 300px; 
            height: 300px;
            margin: 20px auto;
            border: 5px solid #333;
        }
        .c-cell {
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 70px; /* æ”¾å¤§ç¬¦è™Ÿ */
            font-weight: bold;
            border: 3px solid #333;
            cursor: pointer;
            transition: background-color 0.1s;
        }
        .c-cell:hover {
            background-color: #f0f0f0;
        }
        #c-message {
            font-size: 22px;
            font-weight: bold;
            margin-bottom: 15px;
        }
        #c-reset-btn {
            background-color: #007bff; 
            color: white;
            padding: 12px 25px;
        }
    </style>
</head>
<body>

    <header>
        <h1>ğŸ† ç°¡ç´„éŠæˆ²ä¸­å¿ƒ</h1>
        <p>æ¸¬è©¦æ‚¨çš„é€Ÿåº¦èˆ‡æ™ºæ…§ï¼</p>
    </header>

    <div class="container">
        
        <div class="game-card">
            <h2>âš¡ åæ‡‰åŠ›æŒ‘æˆ°</h2>
            <div id="reaction-area">
                é»æ“Šã€Œé–‹å§‹æ¸¬è©¦ã€å¾Œï¼Œç­‰å¾…ç•«é¢è®Šç´…ï¼
            </div>
            <button id="reaction-button">é–‹å§‹æ¸¬è©¦</button>
            <p id="r-high-score-display">æœ€ä½³åæ‡‰æ™‚é–“: <span id="r-high-score">--</span> ms</p>
        </div>

        <div class="game-card">
            <h2>â­•ï¸âŒ åœˆåœˆå‰å‰ (Tic-Tac-Toe)</h2>
            <div id="tictactoe-grid">
                </div>
            <p id="c-message">ç©å®¶ X å…ˆé–‹å§‹</p>
            <button id="c-reset-btn">é‡æ–°é–‹å§‹</button>
        </div>

    </div>

    <script>
        // =================================================================
        //                 JavaScript éŠæˆ²é‚è¼¯éƒ¨åˆ†
        // =================================================================

        // -----------------------------------------------------------------
        // 1. åœˆåœˆå‰å‰é‚è¼¯ (Tic-Tac-Toe Logic)
        // -----------------------------------------------------------------
        let C_board = ['', '', '', '', '', '', '', '', ''];
        let C_currentPlayer = 'X'; 
        let C_gameActive = true;
        const C_winningConditions = [
            [0, 1, 2], [3, 4, 5], [6, 7, 8], // è¡Œ
            [0, 3, 6], [1, 4, 7], [2, 5, 8], // åˆ—
            [0, 4, 8], [2, 4, 6]             // å°è§’ç·š
        ];

        const C_message = document.getElementById('c-message');
        const C_grid = document.getElementById('tictactoe-grid');

        function C_initializeGrid() {
            C_grid.innerHTML = '';
            C_board = ['', '', '', '', '', '', '', '', ''];
            C_currentPlayer = 'X';
            C_gameActive = true;
            C_message.textContent = `ç©å®¶ ${C_currentPlayer} çš„å›åˆ`;

            for (let i = 0; i < 9; i++) {
                const cell = document.createElement('div');
                cell.classList.add('c-cell');
                cell.dataset.index = i;
                cell.addEventListener('click', C_handleClick);
                C_grid.appendChild(cell);
            }
        }

        function C_checkWinner() {
            let roundWon = false;
            for (let i = 0; i < C_winningConditions.length; i++) {
                const winCondition = C_winningConditions[i];
                let a = C_board[winCondition[0]];
                let b = C_board[winCondition[1]];
                let c = C_board[winCondition[2]];

                if (a === '' || b === '' || c === '') {
                    continue;
                }
                if (a === b && b === c) {
                    roundWon = true;
                    break;
                }
            }

            if (roundWon) {
                C_message.textContent = `ğŸ‰ ç©å®¶ ${C_currentPlayer} è´äº†ï¼`;
                C_gameActive = false;
                return;
            }

            // æª¢æŸ¥å¹³å±€
            if (!C_board.includes('')) {
                C_message.textContent = `ğŸ¤ å¹³å±€ï¼`;
                C_gameActive = false;
                return;
            }

            // åˆ‡æ›ç©å®¶
            C_currentPlayer = C_currentPlayer === 'X' ? 'O' : 'X';
            C_message.textContent = `ç©å®¶ ${C_currentPlayer} çš„å›åˆ`;
        }

        function C_handleClick(event) {
            const clickedCell = event.target;
            const clickedCellIndex = parseInt(clickedCell.dataset.index);

            if (C_board[clickedCellIndex] !== '' || !C_gameActive) {
                return;
            }

            C_board[clickedCellIndex] = C_currentPlayer;
            clickedCell.textContent = C_currentPlayer;

            C_checkWinner();
        }

        document.getElementById('c-reset-btn').addEventListener('click', C_initializeGrid);


        // -----------------------------------------------------------------
        // 2. åæ‡‰åŠ›æŒ‘æˆ°é‚è¼¯ (Reaction Challenge Logic) - å„ªåŒ–
        // -----------------------------------------------------------------
        let R_state = 'waiting'; 
        let R_timeout;
        let R_startTime;
        // å˜—è©¦å¾æœ¬åœ°å„²å­˜å–å¾—æœ€é«˜åˆ†
        let R_highScore = localStorage.getItem('R_highScore') || '--'; 
        
        const R_area = document.getElementById('reaction-area');
        const R_button = document.getElementById('reaction-button');
        const R_highScoreSpan = document.getElementById('r-high-score');
        
        R_highScoreSpan.textContent = R_highScore;

        function R_resetArea() {
            R_area.className = '';
            R_area.style.backgroundColor = ''; // æ¸…é™¤èƒŒæ™¯è‰²ï¼Œä½¿ç”¨é è¨­å€¼
        }

        function R_handleStart() {
            R_resetArea();

            if (R_state === 'waiting') {
                // -> é€²å…¥ Ready ç‹€æ…‹
                R_state = 'ready';
                R_area.classList.add('reaction-ready');
                R_area.textContent = 'ğŸŸ¡ ç­‰å¾…... ç•¶ç•«é¢è®Šç´…æ™‚é»æ“Šï¼';
                R_button.textContent = 'é»æ“Šï¼';
                R_button.style.backgroundColor = '#6c757d'; // è®Šç‚ºç°è‰²

                // éš¨æ©Ÿå»¶é² 1.5 åˆ° 5 ç§’
                const delay = Math.random() * 3500 + 1500; 
                R_timeout = setTimeout(R_handleGo, delay);

            } else if (R_state === 'ready') {
                // -> èª¤é»ï¼
                clearTimeout(R_timeout);
                R_area.classList.add('reaction-fail');
                R_area.textContent = 'âŒ å¤ªæ—©äº†ï¼ (åæ‡‰æ™‚é–“ç„¡æ•ˆ)';
                R_button.textContent = 'é‡æ–°é–‹å§‹';
                R_button.style.backgroundColor = '#dc3545';
                R_state = 'waiting';

            } else if (R_state === 'go') {
                // -> æˆåŠŸé»æ“Š
                const R_endTime = performance.now();
                const R_reactionTime = Math.round(R_endTime - R_startTime);
                
                R_area.classList.add('reaction-success');
                R_area.textContent = `âœ… åæ‡‰æ™‚é–“ï¼š${R_reactionTime} ms`;
                R_button.textContent = 'é‡æ–°é–‹å§‹';
                R_button.style.backgroundColor = '#28a745';
                R_state = 'waiting';

                // æ›´æ–°æœ€é«˜åˆ†
                if (R_highScore === '--' || R_reactionTime < parseInt(R_highScore)) {
                    R_highScore = R_reactionTime;
                    localStorage.setItem('R_highScore', R_highScore);
                    R_highScoreSpan.textContent = R_highScore;
                }
            }
        }

        function R_handleGo() {
            // -> é€²å…¥ Go ç‹€æ…‹
            R_state = 'go';
            R_resetArea();
            R_area.classList.add('reaction-go');
            R_area.textContent = 'ğŸ”´ é»æ“Šï¼é»æ“Šï¼';
            R_button.style.backgroundColor = '#ff4136'; // æŒ‰éˆ•ä¹Ÿè®Šç´…
            R_startTime = performance.now(); // é–‹å§‹è¨ˆæ™‚
        }

        R_button.addEventListener('click', R_handleStart);

        // -----------------------------------------------------------------
        // 3. ç¶²é è¼‰å…¥æ™‚å•Ÿå‹•
        // -----------------------------------------------------------------
        window.onload = function() {
            C_initializeGrid(); // å•Ÿå‹•åœˆåœˆå‰å‰
            // åæ‡‰åŠ›æŒ‘æˆ°åˆå§‹ç‹€æ…‹å·²åœ¨ HTML/CSS ä¸­è¨­å®š
        };
    </script>
</body>
</html>
