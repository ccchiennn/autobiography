
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>éŠæˆ²å»³</title>
    <style>
        :root {
            --primary: #00f2fe;
            --secondary: #4facfe;
            --fever: #ff00de;
            --success: #00ff88;
            --danger: #ff416c;
            --bg: #0b0e14;
        }

        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background-color: var(--bg);
            color: white;
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* å…¨åŸŸå°è¦½èˆ‡åˆ†æ•¸ */
        header {
            width: 100%;
            background: rgba(15, 23, 42, 0.9);
            backdrop-filter: blur(10px);
            padding: 15px 0;
            position: sticky;
            top: 0;
            z-index: 1000;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            display: none; /* åˆå§‹éš±è—ï¼Œé€²å…¥éŠæˆ²å¾Œé¡¯ç¤º */
        }

        .top-nav {
            display: flex;
            justify-content: space-around;
            align-items: center;
            max-width: 800px;
            margin: 0 auto;
        }

        .coin-badge {
            background: rgba(255, 255, 255, 0.1);
            padding: 5px 15px;
            border-radius: 20px;
            color: #ffd700;
            font-weight: bold;
            font-size: 1.2rem;
        }

        /* ä¸»ç•«é¢ Welcome Screen */
        #welcome-screen {
            position: fixed;
            inset: 0;
            background: radial-gradient(circle at center, #1e293b 0%, #0b0e14 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 2000;
        }

        #welcome-screen h1 {
            font-size: 4rem;
            margin-bottom: 10px;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-transform: uppercase;
            letter-spacing: 5px;
        }

        .start-btn {
            background: linear-gradient(45deg, var(--secondary), var(--primary));
            border: none;
            padding: 15px 40px;
            color: white;
            font-size: 1.5rem;
            font-weight: bold;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 0 20px rgba(0, 242, 254, 0.5);
            transition: 0.3s;
        }

        .start-btn:hover { transform: scale(1.1); box-shadow: 0 0 30px rgba(0, 242, 254, 0.8); }

        /* éŠæˆ²å€åŸŸ */
        .game-container {
            width: 90%;
            max-width: 600px;
            margin-top: 30px;
            display: none;
        }

        .game-box {
            background: #1e293b;
            padding: 30px;
            border-radius: 30px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
            display: none;
            text-align: center;
        }

        .game-box.active { display: block; animation: slideUp 0.5s ease; }

        @keyframes slideUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }

        /* --- åæ‡‰åŠ›æŒ‘æˆ°ï¼šè¶…å¤§å­—é«”èˆ‡å…‰å½± --- */
        #react-pad {
            width: 100%;
            height: 350px;
            border-radius: 20px;
            background: #334155;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: 0.1s;
        }

        .react-title { font-size: 4rem; font-weight: 900; margin: 0; }
        .react-sub { font-size: 1.2rem; opacity: 0.7; margin-top: 20px; }

        /* --- è³½é¦¬éŠæˆ²ï¼šå‹•ç•«å„ªåŒ– --- */
        .track { background: #111; padding: 20px; border-radius: 15px; margin-top: 20px; }
        .lane { height: 60px; border-bottom: 1px solid #333; position: relative; display: flex; align-items: center; }
        .horse {
            font-size: 2.5rem;
            position: absolute;
            left: 0;
            transition: left 0.1s linear;
        }
        .running { animation: horseMove 0.4s infinite ease-in-out; }
        @keyframes horseMove { 
            0%, 100% { transform: translateY(0) rotate(0); } 
            50% { transform: translateY(-8px) rotate(5deg); } 
        }

        /* --- æŠ•ç±ƒéŠæˆ²ï¼šç¿»å€æ™‚é–“ --- */
        #court {
            width: 100%; height: 350px; background: #000; position: relative;
            border-radius: 20px; overflow: hidden; border: 3px solid #333;
        }
        #court.fever { border-color: var(--fever); box-shadow: inset 0 0 50px var(--fever); }
        #hoop { width: 60px; height: 10px; background: var(--danger); position: absolute; top: 40px; left: 50%; border-radius: 5px; }
        #ball { width: 30px; height: 30px; background: #f97316; border-radius: 50%; position: absolute; bottom: 10px; left: 50%; display: none; }
        .timer-txt { font-size: 2.5rem; font-weight: bold; margin-bottom: 15px; }
        .fever-msg { color: var(--fever); font-weight: bold; animation: pulse 0.5s infinite; display: none; }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.1); } }

        /* å°è¦½æŒ‰éˆ•æ¨£å¼ */
        .nav-btn {
            background: transparent; border: 2px solid var(--primary);
            color: var(--primary); padding: 10px 20px; border-radius: 25px;
            cursor: pointer; font-weight: bold; transition: 0.3s;
        }
        .nav-btn.active { background: var(--primary); color: #000; }

    </style>
</head>
<body>

    <div id="welcome-screen">
        <h1>Welcome to<br>Gamestation</h1>
        <button class="start-btn" onclick="enterGame()">é€²å…¥éŠæˆ²å»³</button>
    </div>

    <header id="main-header">
        <div class="top-nav">
            <button class="nav-btn active" onclick="showTab('react', this)">åæ‡‰æŒ‘æˆ°</button>
            <button class="nav-btn" onclick="showTab('race', this)">ç˜‹ç‹‚è³½é¦¬</button>
            <button class="nav-btn" onclick="showTab('hoop', this)">æŠ•ç±ƒè¨ˆæ™‚è³½</button>
            <div class="coin-badge">ğŸ’° <span id="coin-val">0</span></div>
        </div>
    </header>

    <div class="game-container" id="game-container">
        <div id="react" class="game-box active">
            <div id="react-pad" onclick="handleReact()">
                <p class="react-title" id="react-main">START</p>
                <p class="react-sub" id="react-sub">é»æ“Šæ­¤è™•é–‹å§‹æ¸¬è©¦</p>
            </div>
            <p style="margin-top:20px;">æœ€é«˜ç´€éŒ„: <span id="best-react">--</span> ms</p>
        </div>

        <div id="race" class="game-box">
            <h2 style="color:var(--primary)">å‹•æ…‹è³½é¦¬å ´</h2>
            <div style="margin-bottom:15px;">
                ä¸‹æ³¨: <input type="number" id="bet-val" value="10" min="1" style="width:60px; padding:5px;"> 
                é¸é¦¬: <select id="horse-select" style="padding:5px;"><option value="0">ğŸ 1è™Ÿ</option><option value="1">ğŸ¦„ 2è™Ÿ</option><option value="2">ğŸ¦“ 3è™Ÿ</option></select>
                <button onclick="startRace()" class="start-btn" style="padding:5px 20px; font-size:1rem; margin-left:10px;">é–‹è³½</button>
            </div>
            <div class="track">
                <div class="lane"><div class="horse" id="h0">ğŸ</div></div>
                <div class="lane"><div class="horse" id="h1">ğŸ¦„</div></div>
                <div class="lane"><div class="horse" id="h2">ğŸ¦“</div></div>
            </div>
        </div>

        <div id="hoop" class="game-box">
            <div class="timer-txt" id="timer">30s</div>
            <div class="fever-msg" id="fever-txt">ğŸ”¥ FEVER TIME! 2X GOLD ğŸ”¥</div>
            <div id="court" onclick="shootBall(event)">
                <div id="hoop"></div>
                <div id="ball"></div>
                <div id="hoop-overlay" style="position:absolute; inset:0; background:rgba(0,0,0,0.6); display:flex; justify-content:center; align-items:center;">
                    <button class="start-btn" onclick="startHoopGame()">é–‹å§‹æŒ‘æˆ°</button>
                </div>
            </div>
            <p>æœ€å¾Œ 10 ç§’é€²çƒåƒ¹å€¼ç¿»å€ï¼</p>
        </div>
    </div>

    <script>
        let coins = parseInt(localStorage.getItem('coins')) || 100;
        let bestReact = localStorage.getItem('bestReact') || '--';

        function updateUI() {
            document.getElementById('coin-val').innerText = coins;
            document.getElementById('best-react').innerText = bestReact;
            localStorage.setItem('coins', coins);
            localStorage.setItem('bestReact', bestReact);
        }

        function enterGame() {
            document.getElementById('welcome-screen').style.display = 'none';
            document.getElementById('main-header').style.display = 'block';
            document.getElementById('game-container').style.display = 'block';
            updateUI();
        }

        function showTab(id, btn) {
            document.querySelectorAll('.game-box').forEach(b => b.classList.remove('active'));
            document.querySelectorAll('.nav-btn').forEach(n => n.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            btn.classList.add('active');
        }

        // --- åæ‡‰åŠ›é‚è¼¯ ---
        let rState = 'idle', rTimer, rStart;
        function handleReact() {
            const pad = document.getElementById('react-pad');
            const main = document.getElementById('react-main');
            if (rState === 'idle') {
                rState = 'wait';
                pad.style.background = '#f59e0b';
                main.innerText = 'WAIT...';
                rTimer = setTimeout(() => {
                    rState = 'go';
                    pad.style.background = '#10b981';
                    main.innerText = 'GO!!';
                    rStart = Date.now();
                }, Math.random() * 3000 + 2000);
            } else if (rState === 'wait') {
                clearTimeout(rTimer);
                rState = 'idle';
                pad.style.background = '#ef4444';
                main.innerText = 'TOO EARLY!';
            } else if (rState === 'go') {
                const diff = Date.now() - rStart;
                rState = 'idle';
                pad.style.background = '#334155';
                main.innerText = diff + 'ms';
                if (bestReact === '--' || diff < bestReact) bestReact = diff;
                coins += (diff < 300 ? 20 : 5);
                updateUI();
            }
        }

        // --- è³½é¦¬é‚è¼¯ ---
        let isRacing = false;
        function startRace() {
            const bet = parseInt(document.getElementById('bet-val').value);
            if (isRacing || coins < bet) return alert("é‡‘å¹£ä¸è¶³æˆ–æ­£åœ¨æ¯”è³½ï¼");
            coins -= bet; updateUI(); isRacing = true;
            
            const horses = [0, 0, 0];
            document.querySelectorAll('.horse').forEach(h => h.classList.add('running'));
            
            const timer = setInterval(() => {
                for(let i=0; i<3; i++) {
                    horses[i] += Math.random() * 3;
                    document.getElementById('h'+i).style.left = horses[i] + '%';
                    if (horses[i] >= 90) {
                        clearInterval(timer);
                        isRacing = false;
                        document.querySelectorAll('.horse').forEach(h => h.classList.remove('running'));
                        const win = (i == document.getElementById('horse-select').value);
                        if (win) { coins += bet * 3; alert("ä½ è´äº†ï¼ç²å¾— " + (bet*3) + " é‡‘å¹£"); }
                        else { alert("è¼¸äº†ï¼å† è»æ˜¯ " + (i+1) + " è™Ÿé¦¬"); }
                        updateUI();
                        setTimeout(() => horses.forEach((_,idx) => document.getElementById('h'+idx).style.left = '0'), 1000);
                    }
                }
            }, 50);
        }

        // --- æŠ•ç±ƒæŒ‘æˆ°é‚è¼¯ ---
        let hoopActive = false, hoopTime = 30, hoopInt, isFever = false;
        function startHoopGame() {
            document.getElementById('hoop-overlay').style.display = 'none';
            hoopActive = true; hoopTime = 30; isFever = false;
            document.getElementById('court').classList.remove('fever');
            document.getElementById('fever-txt').style.display = 'none';
            
            hoopInt = setInterval(() => {
                hoopTime--;
                document.getElementById('timer').innerText = hoopTime + 's';
                if (hoopTime <= 10) {
                    isFever = true;
                    document.getElementById('court').classList.add('fever');
                    document.getElementById('fever-txt').style.display = 'block';
                    document.getElementById('timer').style.color = 'var(--fever)';
                }
                if (hoopTime <= 0) {
                    clearInterval(hoopInt);
                    hoopActive = false;
                    document.getElementById('hoop-overlay').style.display = 'flex';
                    document.getElementById('hoop-overlay').innerHTML = `<h2>æ™‚é–“åˆ°ï¼</h2><button class="start-btn" onclick="startHoopGame()">å†ç©ä¸€æ¬¡</button>`;
                }
            }, 1000);
        }

        let hoopX = 50, hoopDir = 2;
        setInterval(() => {
            hoopX += hoopDir;
            if (hoopX > 80 || hoopX < 20) hoopDir *= -1;
            document.getElementById('hoop').style.left = hoopX + '%';
        }, 30);

        let shooting = false;
        function shootBall(e) {
            if (!hoopActive || shooting) return;
            shooting = true;
            const ball = document.getElementById('ball');
            const court = document.getElementById('court').getBoundingClientRect();
            const targetX = ((e.clientX - court.left) / court.width) * 100;
            
            ball.style.display = 'block';
            let bY = 10, bX = 50, bSize = 30;
            const drift = (targetX - 50) / 15;

            const anim = setInterval(() => {
                bY += 10; bX += drift; bSize -= 0.5;
                ball.style.bottom = bY + 'px';
                ball.style.left = bX + '%';
                ball.style.width = bSize + 'px';
                ball.style.height = bSize + 'px';

                if (bY > 300) {
                    clearInterval(anim);
                    if (Math.abs(bX - hoopX) < 8) {
                        coins += isFever ? 20 : 10;
                        updateUI();
                    }
                    ball.style.display = 'none';
                    shooting = false;
                }
            }, 20);
        }
    </script>
</body>
</html>
