<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å…¨èƒ½éŠæˆ²ç‹ï¼šä¸‰åˆä¸€éŠæˆ²å»³</title>
    <style>
        :root {
            --primary: #ff4757;
            --secondary: #2f3542;
            --accent: #ffa502;
            --grass: #2ed573;
            --court: #e67e22;
        }

        body {
            font-family: 'Segoe UI', sans-serif;
            background-color: var(--secondary);
            color: white;
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* å°è¦½åˆ— */
        .nav {
            display: flex;
            width: 100%;
            background: #1e222d;
            justify-content: center;
            position: sticky;
            top: 0;
            z-index: 100;
            padding: 10px 0;
        }

        .nav-btn {
            background: none;
            border: none;
            color: #a4b0be;
            padding: 10px 20px;
            font-size: 1rem;
            cursor: pointer;
            transition: 0.3s;
            border-bottom: 3px solid transparent;
        }

        .nav-btn.active {
            color: white;
            border-bottom-color: var(--primary);
        }

        .game-section {
            display: none;
            width: 100%;
            max-width: 600px;
            padding: 20px;
            text-align: center;
        }

        .game-section.active { display: block; }

        .total-score {
            background: rgba(0,0,0,0.3);
            padding: 10px 30px;
            border-radius: 20px;
            margin: 20px 0;
            font-size: 1.5rem;
            color: var(--accent);
            font-weight: bold;
        }

        /* --- 1. é»æ“ŠéŠæˆ² --- */
        .main-btn {
            width: 220px; height: 220px;
            background-color: var(--primary);
            border: 8px solid white; border-radius: 50%;
            color: white; font-size: 1.5rem; font-weight: bold;
            cursor: pointer; transition: transform 0.1s;
            box-shadow: 0 10px 20px rgba(0,0,0,0.4);
            margin: 20px auto;
        }
        .main-btn:active { transform: scale(0.9); }

        /* --- 2. è³½é¦¬éŠæˆ² --- */
        .track { background: #34495e; padding: 15px; border-radius: 10px; position: relative; }
        .lane { height: 45px; border-bottom: 1px dashed #ffffff44; position: relative; display: flex; align-items: center; }
        .horse { position: absolute; left: 0; font-size: 2rem; transition: left 0.1s linear; }
        .finish { position: absolute; right: 0; top: 0; bottom: 0; width: 8px; background: repeating-linear-gradient(45deg, #fff, #000 5px); }

        /* --- 3. æŠ•ç±ƒéŠæˆ² --- */
        #basketball-court {
            width: 100%;
            height: 400px;
            background: linear-gradient(to bottom, #2980b9, #2c3e50);
            position: relative;
            border-radius: 10px;
            overflow: hidden;
            cursor: crosshair;
            border: 4px solid #fff;
        }
        #hoop {
            width: 60px; height: 10px;
            background: red;
            position: absolute;
            top: 50px; left: 50%;
            transform: translateX(-50%);
            border-radius: 5px;
        }
        #ball {
            width: 30px; height: 30px;
            background: #e67e22;
            border-radius: 50%;
            position: absolute;
            bottom: 20px; left: 50%;
            transform: translateX(-50%);
            box-shadow: inset -5px -5px 10px rgba(0,0,0,0.3);
            display: none;
        }
        .guide-text { font-size: 0.9rem; color: #bdc3c7; margin-top: 10px; }

        .click-anim {
            position: absolute; color: var(--accent); font-weight: bold;
            pointer-events: none; animation: floatUp 0.8s forwards;
        }
        @keyframes floatUp { 0% { opacity: 1; transform: translateY(0); } 100% { opacity: 0; transform: translateY(-80px); } }
    </style>
</head>
<body>

    <div class="nav">
        <button class="nav-btn active" onclick="showGame('clicker')">å¢å¤§é»æ“Š</button>
        <button class="nav-btn" onclick="showGame('racing')">ç˜‹ç‹‚è³½é¦¬</button>
        <button class="nav-btn" onclick="showGame('basketball')">è¡—é ­æŠ•ç±ƒ</button>
    </div>

    <div class="total-score">ğŸ’° é‡‘å¹£: <span id="global-score">0</span></div>

    <div id="clicker" class="game-section active">
        <h2>é»æ“Šç²å–è²¡å¯Œ</h2>
        <button class="main-btn" onclick="addScore(event, 1)">é»æˆ‘ï¼</button>
        <p>å„ªåŒ–æç¤ºï¼šæŒ‰éˆ•è¶Šå¤§ï¼Œé»å¾—è¶Šçˆ½ï¼</p>
    </div>

    <div id="racing" class="game-section">
        <h2>èª°æœƒè·‘è´ï¼Ÿ(è³ ç‡ 4x)</h2>
        <div style="margin-bottom: 15px;">
            ä¸‹æ³¨: <input type="number" id="bet" value="10" min="1" style="width:50px"> 
            é¸é¦¬: <select id="horseIdx"><option value="0">ğŸ</option><option value="1">ğŸ¦„</option><option value="2">ğŸ¦“</option><option value="3">ğŸ˜</option></select>
            <button onclick="startRace()" id="raceBtn" style="background:var(--grass); color:white; border:none; padding:5px 15px; border-radius:5px;">é–‹è³½</button>
        </div>
        <div class="track">
            <div class="finish"></div>
            <div class="lane"><div class="horse" id="h0">ğŸ</div></div>
            <div class="lane"><div class="horse" id="h1">ğŸ¦„</div></div>
            <div class="lane"><div class="horse" id="h2">ğŸ¦“</div></div>
            <div class="lane"><div class="horse" id="h3">ğŸ˜</div></div>
        </div>
        <p id="raceMsg"></p>
    </div>

    <div id="basketball" class="game-section">
        <h2>ç¥å°„æ‰‹æŒ‘æˆ°</h2>
        <p>é€²çƒç²å¾— 10 é‡‘å¹£ï¼</p>
        <div id="basketball-court" onclick="shoot(event)">
            <div id="hoop"></div>
            <div id="ball"></div>
        </div>
        <p class="guide-text">é»æ“Šçƒå ´ä»»ä½•åœ°æ–¹ç™¼å°„ç±ƒçƒï¼ç›®æ¨™æ˜¯ç´…è‰²ç±ƒæ¡†ã€‚</p>
    </div>

    <script>
        let score = 0;
        const scoreDisplay = document.getElementById('global-score');

        function addScore(e, val) {
            score += val;
            updateUI();
            if(e) createAnim(e.clientX, e.clientY, `+${val}`);
        }

        function updateUI() {
            scoreDisplay.innerText = score;
        }

        function showGame(id) {
            document.querySelectorAll('.game-section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            event.target.classList.add('active');
        }

        function createAnim(x, y, text) {
            const el = document.createElement('div');
            el.className = 'click-anim';
            el.innerText = text;
            el.style.left = x + 'px'; el.style.top = y + 'px';
            document.body.appendChild(el);
            setTimeout(() => el.remove(), 800);
        }

        // --- è³½é¦¬é‚è¼¯ ---
        let racing = false;
        function startRace() {
            const betVal = parseInt(document.getElementById('bet').value);
            if(racing || score < betVal) return alert("é‡‘å¹£ä¸è¶³æˆ–æ­£åœ¨æ¯”è³½ï¼");
            score -= betVal; updateUI(); racing = true;
            
            let pos = [0,0,0,0];
            const timer = setInterval(() => {
                for(let i=0; i<4; i++) {
                    pos[i] += Math.random() * 2.5;
                    document.getElementById('h'+i).style.left = pos[i] + '%';
                    if(pos[i] >= 90) {
                        clearInterval(timer);
                        finishRace(i, parseInt(document.getElementById('horseIdx').value), betVal);
                    }
                }
            }, 50);
        }

        function finishRace(winner, guess, bet) {
            racing = false;
            if(winner === guess) {
                const win = bet * 4; score += win;
                document.getElementById('raceMsg').innerText = `è´äº†ï¼ç²å¾— ${win} é‡‘å¹£ï¼`;
            } else {
                document.getElementById('raceMsg').innerText = `è¼¸äº†ï¼å† è»æ˜¯ ${winner+1} è™Ÿé¦¬ã€‚`;
            }
            updateUI();
            setTimeout(() => { for(let i=0; i<4; i++) document.getElementById('h'+i).style.left = '0'; }, 2000);
        }

        // --- æŠ•ç±ƒé‚è¼¯ ---
        let hoopPos = 50;
        let hoopDir = 2;
        let isShooting = false;

        // ç±ƒæ¡†ç§»å‹•
        setInterval(() => {
            hoopPos += hoopDir;
            if(hoopPos > 85 || hoopPos < 15) hoopDir *= -1;
            document.getElementById('hoop').style.left = hoopPos + '%';
        }, 30);

        function shoot(e) {
            if(isShooting) return;
            isShooting = true;
            const ball = document.getElementById('ball');
            const court = document.getElementById('basketball-court').getBoundingClientRect();
            const clickX = e.clientX - court.left;
            
            ball.style.display = 'block';
            ball.style.left = '50%';
            ball.style.bottom = '20px';

            // ç°¡æ˜“å‹•ç•«
            let bPos = 20;
            let bLeft = 50;
            const targetLeft = (clickX / court.width) * 100;
            const drift = (targetLeft - 50) / 20;

            const shotTimer = setInterval(() => {
                bPos += 10;
                bLeft += drift;
                ball.style.bottom = bPos + 'px';
                ball.style.left = bLeft + '%';

                if(bPos > 340) { // åˆ°é”ç±ƒæ¡†é«˜åº¦
                    clearInterval(shotTimer);
                    checkHit(bLeft);
                    setTimeout(() => { ball.style.display = 'none'; isShooting = false; }, 200);
                }
            }, 20);
        }

        function checkHit(ballLeft) {
            if(Math.abs(ballLeft - hoopPos) < 8) {
                addScore(null, 10);
                alert("ç©ºå¿ƒå…¥ç¶²ï¼+10 é‡‘å¹£");
            }
        }
    </script>
</body>
</html>
